{"version":3,"file":null,"sources":["../src/worker/worker.js"],"sourcesContent":["/* globals Firebase, setImmediate, setInterval */\n\nconst fireworkers = [];\nlet simulationQueue = Promise.resolve(), consoleIntercepted = false, simulationConsoleLogs;\n\n\nclass LocalStorage {\n  constructor() {\n    this._items = [];\n    this._pendingItems = [];\n    this._initialized = false;\n    this._flushPending = this.flushPending.bind(this);\n  }\n\n  init(items) {\n    if (!this._initialized) {\n      this._items = items;\n      this._initialized = true;\n    }\n  }\n\n  _update(item) {\n    if (!this._pendingItems.length) setImmediate(this._flushPending);\n    this._pendingItems.push(item);\n  }\n\n  flushPending() {\n    if (!fireworkers.length) return;\n    fireworkers[0]._send({msg: 'updateLocalStorage', items: this._pendingItems});\n    this._pendingItems = [];\n  }\n\n  get length() {return this._items.length;}\n\n  key(n) {\n    return this._items[n].key;\n  }\n\n  getItem(key) {\n    for (let item of this._items) {\n      if (item.key === key) return item.value;\n    }\n    return null;\n  }\n\n  setItem(key, value) {\n    let targetItem;\n    for (let item of this._items) {\n      if (item.key === key) {\n        targetItem = item;\n        item.value = value;\n        break;\n      }\n    }\n    if (!targetItem) {\n      targetItem = {key, value};\n      this._items.push(targetItem);\n    }\n    this._update(targetItem);\n  }\n\n  removeItem(key) {\n    for (let i = 0; i < this._items.length; i++) {\n      if (this._items[i].key === key) {\n        this._items.splice(i, 1);\n        this._update({key, value: null});\n        break;\n      }\n    }\n  }\n\n  clear() {\n    for (let item in this._items) {\n      this._update({key: item.key, value: null});\n    }\n    this._items = [];\n  }\n}\n\nself.localStorage = new LocalStorage();\n\n\nclass Branch {\n  constructor() {\n    this._root = null;\n  }\n\n  set(value) {\n    this._root = value;\n  }\n\n  diff(value, pathPrefix) {\n    const updates = {};\n    const segments = pathPrefix === '/' ? [''] : pathPrefix.split('/');\n    if (this._diffRecursively(this._root, value, segments, updates)) {\n      this._root = value;\n      updates[pathPrefix] = value;\n    }\n    return updates;\n  }\n\n  _diffRecursively(oldValue, newValue, segments, updates) {\n    if (oldValue === undefined) oldValue = null;\n    if (newValue === undefined) newValue = null;\n    if (oldValue === null) return newValue !== null;\n    if (oldValue instanceof Object && newValue instanceof Object) {\n      let replace = true;\n      const keysToReplace = [];\n      for (let childKey in newValue) {\n        if (!newValue.hasOwnProperty(childKey)) continue;\n        if (this._diffRecursively(\n            oldValue[childKey], newValue[childKey], segments.concat(childKey), updates)) {\n          keysToReplace.push(childKey);\n        } else {\n          replace = false;\n        }\n      }\n      if (replace) return true;\n      for (let childKey in oldValue) {\n        if (!oldValue.hasOwnProperty(childKey) || newValue.hasOwnProperty(childKey)) continue;\n        updates[segments.concat(childKey).join('/')] = null;\n        delete oldValue[childKey];\n      }\n      for (let childKey of keysToReplace) {\n        updates[segments.concat(childKey).join('/')] = newValue[childKey];\n        oldValue[childKey] = newValue[childKey];\n      }\n    } else {\n      return newValue !== oldValue;\n    }\n  }\n}\n\n\nclass Fireworker {\n  constructor(port) {\n    this.ping();\n    this._port = port;\n    this._lastWriteSerial = 0;\n    this._callbacks = {};\n    this._messages = [];\n    this._flushMessageQueue = this._flushMessageQueue.bind(this);\n    port.onmessage = this._receive.bind(this);\n  }\n\n  init({storage, url}) {\n    if (storage) self.localStorage.init(storage);\n    if (url) createRef(url);\n    return {\n      exposedFunctionNames: Object.keys(Fireworker._exposed),\n      firebaseSdkVersion: Firebase.SDK_VERSION\n    };\n  }\n\n  destroy() {\n    for (let key in this._callbacks) {\n      const callback = this._callbacks[key];\n      if (callback.cancel) callback.cancel();\n    }\n    this._callbacks = {};\n    this._port.onmessage = null;\n    this._messages = [];\n    const k = fireworkers.indexOf(this);\n    if (k >= 0) fireworkers[k] = null;\n  }\n\n  ping() {\n    this.lastTouched = Date.now();\n  }\n\n  bounceConnection() {\n    Firebase.goOffline();\n    Firebase.goOnline();\n  }\n\n  _receive(event) {\n    Fireworker._firstMessageReceived = true;\n    this.lastTouched = Date.now();\n    for (let message of event.data) this._receiveMessage(message);\n  }\n\n  _receiveMessage(message) {\n    let promise;\n    try {\n      const fn = this[message.msg];\n      if (typeof fn !== 'function') throw new Error('Unknown message: ' + message.msg);\n      if (message.writeSerial) this._lastWriteSerial = message.writeSerial;\n      promise = Promise.resolve(fn.call(this, message));\n    } catch(e) {\n      promise = Promise.reject(e);\n    }\n    if (!message.oneWay) {\n      this._send({msg: 'acknowledge', id: message.id});\n      promise.then(result => {\n        this._send({msg: 'resolve', id: message.id, result: result});\n      }, error => {\n        this._send({msg: 'reject', id: message.id, error: errorToJson(error)});\n      });\n    }\n  }\n\n  _send(message) {\n    if (!this._messages.length) setImmediate(this._flushMessageQueue);\n    this._messages.push(message);\n  }\n\n  _flushMessageQueue() {\n    this._port.postMessage(this._messages);\n    this._messages = [];\n  }\n\n  call({name, args}) {\n    try {\n      return Promise.resolve(Fireworker._exposed[name].apply(null, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n\n  authWithCustomToken({url, authToken, options}) {\n    return createRef(url).authWithCustomToken(authToken, options);\n  }\n\n  unauth({url}) {\n    return createRef(url).unauth();\n  }\n\n  onAuth({url, callbackId}) {\n    const authCallback = this._callbacks[callbackId] = this._onAuthCallback.bind(this, callbackId);\n    authCallback.cancel = this._offAuth.bind(this, url, authCallback);\n    createRef(url).onAuth(authCallback);\n  }\n\n  _offAuth(url, authCallback) {\n    createRef(url).offAuth(authCallback);\n  }\n\n  _onAuthCallback(callbackId, auth) {\n    this._send({msg: 'callback', id: callbackId, args: [auth]});\n  }\n\n  set({url, value}) {\n    return createRef(url).set(value);\n  }\n\n  update({url, value}) {\n    return createRef(url).update(value);\n  }\n\n  on({listenerKey, url, spec, eventType, callbackId, options}) {\n    options = options || {};\n    if (options.sync) options.branch = new Branch();\n    const snapshotCallback = this._callbacks[callbackId] =\n      this._onSnapshotCallback.bind(this, callbackId, options);\n    snapshotCallback.listenerKey = listenerKey;\n    snapshotCallback.eventType = eventType;\n    snapshotCallback.cancel = this.off.bind(this, {listenerKey, url, spec, eventType, callbackId});\n    const cancelCallback = this._onCancelCallback.bind(this, callbackId);\n    createRef(url, spec).on(eventType, snapshotCallback, cancelCallback);\n    if (options.sync) options.omitValue = true;\n  }\n\n  off({listenerKey, url, spec, eventType, callbackId}) {\n    let snapshotCallback;\n    if (callbackId) {\n      // Callback IDs will not be reused across on() calls, so it's safe to just delete it.\n      snapshotCallback = this._callbacks[callbackId];\n      delete this._callbacks[callbackId];\n    } else {\n      for (let key of Object.keys(this._callbacks)) {\n        if (!this._callbacks.hasOwnProperty(key)) continue;\n        const callback = this._callbacks[key];\n        if (callback.listenerKey === listenerKey &&\n            (!eventType || callback.eventType === eventType)) {\n          delete this._callbacks[key];\n        }\n      }\n    }\n    createRef(url, spec).off(eventType, snapshotCallback);\n  }\n\n  _onSnapshotCallback(callbackId, options, snapshot) {\n    if (options.sync && options.rest) {\n      const path = decodeURIComponent(\n        snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n      let value;\n      try {\n        value = normalizeFirebaseValue(snapshot.val());\n      } catch (e) {\n        options.branch.set(null);\n        this._send({\n          msg: 'callback', id: callbackId,\n          args: [null, {path, exists: snapshot.exists(), valueError: errorToJson(e)}]\n        });\n      }\n      const updates = this.options.branch.diff(value, path);\n      for (let childPath in updates) {\n        if (!updates.hasOwnProperty(childPath)) continue;\n        this._send({\n          msg: 'callback', id: callbackId,\n          args: [null, {path: childPath, value: updates[childPath]}]\n        });\n      }\n    } else {\n      const snapshotJson = this._snapshotToJson(snapshot, options);\n      if (options.sync) options.branch.set(snapshotJson.value);\n      this._send({msg: 'callback', id: callbackId, args: [null, snapshotJson]});\n      options.rest = true;\n    }\n  }\n\n  _onCancelCallback(callbackId, error) {\n    delete this._callbacks[callbackId];\n    this._send({msg: 'callback', id: callbackId, args: [errorToJson(error)]});\n  }\n\n  transaction({url, oldValue, relativeUpdates}) {\n    const ref = createRef(url);\n    let stale;\n\n    return ref.transaction(value => {\n      value = normalizeFirebaseValue(value);\n      stale = !areEqualNormalFirebaseValues(value, oldValue);\n      if (stale) return;\n      if (relativeUpdates) {\n        for (let relativePath in relativeUpdates) {\n          if (!relativeUpdates.hasOwnProperty(relativePath)) continue;\n          if (relativePath) {\n            const segments = relativePath.split('/');\n            if (value === undefined || value === null) value = {};\n            let object = value;\n            for (let i = 0; i < segments.length - 1; i++) {\n              const key = segments[i];\n              let child = object[key];\n              if (child === undefined || child === null) child = object[key] = {};\n              object = child;\n            }\n            object[segments[segments.length - 1]] = relativeUpdates[relativePath];\n          } else {\n            value = relativeUpdates[relativePath];\n          }\n        }\n      }\n      return value;\n    }).then(result => {\n      return !stale;\n    }, error => {\n      if (error.message === 'set' || error.message === 'disconnect') return false;\n      return Promise.reject(error);\n    });\n  }\n\n  _snapshotToJson(snapshot, options) {\n    const path =\n      decodeURIComponent(snapshot.ref().toString().replace(/.*?:\\/\\/[^/]*/, '').replace(/\\/$/, ''));\n    if (options && options.omitValue) {\n      return {path, exists: snapshot.exists(), writeSerial: this._lastWriteSerial};\n    } else {\n      try {\n        return {\n          path, value: normalizeFirebaseValue(snapshot.val()), writeSerial: this._lastWriteSerial\n        };\n      } catch (e) {\n        return {\n          path, exists: snapshot.exists(), valueError: errorToJson(e),\n          writeSerial: this._lastWriteSerial\n        };\n      }\n    }\n  }\n\n  onDisconnect({url, method, value}) {\n    const onDisconnect = createRef(url).onDisconnect();\n    return onDisconnect[method].call(onDisconnect, value);\n  }\n\n  simulate({token, method, url, args}) {\n    interceptConsoleLog();\n    let simulatedFirebase;\n    return (simulationQueue = simulationQueue.catch(() => {}).then(() => {\n      simulationConsoleLogs = [];\n      simulatedFirebase = createRef(url, null, 'permission_denied_simulator');\n      simulatedFirebase.unauth();\n      return simulatedFirebase.authWithCustomToken(token, function() {}, {remember: 'none'});\n    }).then(() => {\n      return simulatedFirebase[method].apply(simulatedFirebase, args);\n    }).then(() => {\n      return null;\n    }, e => {\n      const code = e.code || e.message;\n      if (code && code.toLowerCase() === 'permission_denied') {\n        return simulationConsoleLogs.join('\\n');\n      } else {\n        return 'Got a different error in simulation: ' + e;\n      }\n    }));\n  }\n\n  static expose(fn, name) {\n    name = name || fn.name;\n    if (!name) throw new Error('Cannot expose a function with no name: ' + fn);\n    if (Fireworker._exposed.hasOwnProperty(name)) {\n      throw new Error(`Function ${name}() already exposed`);\n    }\n    if (Fireworker._firstMessageReceived) {\n      throw new Error('Too late to expose function, worker in use');\n    }\n    Fireworker._exposed[name] = fn;\n  }\n}\n\nFireworker._exposed = {};\nFireworker._firstMessageReceived = false;\n\n\nfunction interceptConsoleLog() {\n  if (consoleIntercepted) return;\n  const originalLog = console.log;\n  let lastTestIndex;\n  console.log = function() {\n    let message = Array.prototype.join.call(arguments, ' ');\n    if (!/^(FIREBASE: \\n?)+/.test(message)) return originalLog.apply(console, arguments);\n    message = message\n      .replace(/^(FIREBASE: \\n?)+/, '')\n      .replace(/^\\s+([^.]*):(?:\\.(read|write|validate):)?.*/g, function(match, g1, g2) {\n        g2 = g2 || 'read';\n        return ' ' + g2 + ' ' + g1;\n      });\n    if (/^\\s+/.test(message)) {\n      const match = message.match(/^\\s+=> (true|false)/);\n      if (match) {\n        simulationConsoleLogs[lastTestIndex] =\n          (match[1] === 'true' ? ' \\u2713' : ' \\u2717') + simulationConsoleLogs[lastTestIndex];\n        lastTestIndex = undefined;\n      } else {\n        if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n        simulationConsoleLogs.push(message);\n        lastTestIndex = simulationConsoleLogs.length - 1;\n      }\n    } else if (/^\\d+:\\d+: /.test(message)) {\n      simulationConsoleLogs.push('   ' + message);\n    } else {\n      if (lastTestIndex === simulationConsoleLogs.length - 1) simulationConsoleLogs.pop();\n      simulationConsoleLogs.push(message);\n      lastTestIndex = undefined;\n    }\n  };\n  consoleIntercepted = true;\n}\n\nfunction errorToJson(error) {\n  const json = {name: error.name};\n  const propertyNames = Object.getOwnPropertyNames(error);\n  for (let propertyName of propertyNames) {\n    json[propertyName] = error[propertyName];\n  }\n  return json;\n}\n\nfunction createRef(url, spec, context) {\n  try {\n    let ref = new Firebase(url, context);\n    if (spec) {\n      switch (spec.by) {\n        case '$key': ref = ref.orderByKey(); break;\n        case '$value': ref = ref.orderByValue(); break;\n        default: ref = ref.orderByChild(spec.by); break;\n      }\n      if (spec.at) ref = ref.equalTo(spec.at);\n      else if (spec.from) ref = ref.startAt(spec.from);\n      else if (spec.to) ref = ref.endAt(spec.to);\n      if (spec.first) ref = ref.limitToFirst(spec.first);\n      else if (spec.last) ref = ref.limitToLast(spec.last);\n    }\n    return ref;\n  } catch (e) {\n    e.extra = {url, spec, context};\n    throw e;\n  }\n}\n\nfunction normalizeFirebaseValue(value) {\n  if (Array.isArray(value)) {\n    const normalValue = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      if (item === undefined || item === null) continue;\n      normalValue[i] = normalizeFirebaseValue(item);\n    }\n    return normalValue;\n  }\n  if (value instanceof Object) {\n    for (let key in value) {\n      if (value.hasOwnProperty(key)) value[key] = normalizeFirebaseValue(value[key]);\n    }\n  }\n  return value;\n}\n\n\nfunction areEqualNormalFirebaseValues(a, b) {\n  if (a === b) return true;\n  if (!(typeof a === 'object' && typeof b === 'object')) return false;\n  for (let key in a) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n    if (!areEqualNormalFirebaseValues(a[key], b[key])) return false;\n  }\n  for (let key in b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return false;\n  }\n  return true;\n}\n\nfunction acceptConnections() {\n  if (typeof onconnect !== 'undefined') {\n    self.onconnect = function(event) {\n      fireworkers.push(new Fireworker(event.ports[0]));\n    };\n  } else {\n    fireworkers.push(new Fireworker(self));\n  }\n  self.localStorage.flushPending();\n}\n\nconst CONNECTION_CHECK_INTERVAL = 60 * 1000;\nlet lastConnectionCheck = Date.now();\nsetInterval(function findAbandonedConnections() {\n  const now = Date.now(), gap = now - lastConnectionCheck - CONNECTION_CHECK_INTERVAL;\n  lastConnectionCheck = now;\n  fireworkers.forEach(worker => {\n    if (!worker) return;\n    if (gap >= 1000 && worker.lastTouched <= now - gap) worker.lastTouched += gap;\n    if (now - worker.lastTouched >= 3 * CONNECTION_CHECK_INTERVAL) worker.destroy();\n  });\n  let k;\n  while ((k = fireworkers.indexOf(null)) >= 0) fireworkers.splice(k, 1);\n}, CONNECTION_CHECK_INTERVAL);\n\nself.Fireworker = Fireworker;\nself.window = self;\nacceptConnections();\n"],"names":["const","let","this","childKey","key"],"mappings":"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"}